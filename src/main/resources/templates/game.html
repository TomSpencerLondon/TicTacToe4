<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
  <link th:href="@{/tailwind.css}" href="../static/tailwind.css" rel="stylesheet">
</head>
<body>
<main class="pt-8 text-center">
  <h1 class="mb-8 text-3xl font-bold uppercase">Tic Tac Toe</h1>
  <div id="gameState" th:text="${message}">
    Connecting to game...
  </div>
  <form id="board" class="grid grid-cols-3 mx-auto w-64 border-black border-solid border-2"
        th:action="@{/game}" method="post">
  </form>
</main>
</body>
<script>
  const gameMessage = `{"gameState":"PLAYER1TURN","board":[["X","_","_"],["_","O","_"],["_","_","_"]]}`
  const parsedMessage = JSON.parse(gameMessage);
  const array = parsedMessage.board
  const board = document.getElementById("board");
  const gameState = document.getElementById("gameState");
  gameState.innerText = parsedMessage.gameState

  for (let row = 0; row < 3; row++) {
    for (let column = 0; column < 3; column++) {
      if (array[row][column] === "_") {
        board.innerHTML += `
<button
    class="h-24 border-solid border-2 border-black cursor-pointer bg-lime-200"
    type="submit" name="square">
</button>
`
      } else {
        board.innerHTML += `
<div
    class="h-24 border-solid border-2 border-black text-center flex justify-center items-center font-extrabold text-3xl">
${array[row][column]}
 </div>
        `
      }
    }
  }
</script>
</html>
